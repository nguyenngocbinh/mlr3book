<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.2 DALEX | mlr3 book</title>
  <meta name="description" content="8.2 DALEX | mlr3 book" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="8.2 DALEX | mlr3 book" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://mlr3book.mlr-org.com/" />
  <meta property="og:image" content="https://mlr3book.mlr-org.com//block.png" />
  
  <meta name="github-repo" content="mlr-org/mlr3book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.2 DALEX | mlr3 book" />
  
  
  <meta name="twitter:image" content="https://mlr3book.mlr-org.com//block.png" />

<meta name="author" content="Marc Becker" />
<meta name="author" content="Martin Binder" />
<meta name="author" content="Bernd Bischl" />
<meta name="author" content="Michel Lang" />
<meta name="author" content="Florian Pfisterer" />
<meta name="author" content="Nicholas G. Reich" />
<meta name="author" content="Jakob Richter" />
<meta name="author" content="Patrick Schratz" />
<meta name="author" content="Raphael Sonabend" />


<meta name="date" content="2021-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="apple-touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="iml.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mlr3 Manual <img src='https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png' width=30 /></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Citation Info</a></li>
<li class="chapter" data-level="" data-path="quickstart.html"><a href="quickstart.html"><i class="fa fa-check"></i>Quickstart</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction and Overview</a></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>2.1</b> Quick R6 Intro for Beginners</a></li>
<li class="chapter" data-level="2.2" data-path="tasks.html"><a href="tasks.html"><i class="fa fa-check"></i><b>2.2</b> Tasks</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tasks.html"><a href="tasks.html#tasks-types"><i class="fa fa-check"></i><b>2.2.1</b> Task Types</a></li>
<li class="chapter" data-level="2.2.2" data-path="tasks.html"><a href="tasks.html#tasks-creation"><i class="fa fa-check"></i><b>2.2.2</b> Task Creation</a></li>
<li class="chapter" data-level="2.2.3" data-path="tasks.html"><a href="tasks.html#tasks-predefined"><i class="fa fa-check"></i><b>2.2.3</b> Predefined tasks</a></li>
<li class="chapter" data-level="2.2.4" data-path="tasks.html"><a href="tasks.html#tasks-api"><i class="fa fa-check"></i><b>2.2.4</b> Task API</a>
<ul>
<li class="chapter" data-level="2.2.4.1" data-path="tasks.html"><a href="tasks.html#tasks-retrieving"><i class="fa fa-check"></i><b>2.2.4.1</b> Retrieving Data</a></li>
<li class="chapter" data-level="2.2.4.2" data-path="tasks.html"><a href="tasks.html#tasks-roles"><i class="fa fa-check"></i><b>2.2.4.2</b> Roles (Rows and Columns)</a></li>
<li class="chapter" data-level="2.2.4.3" data-path="tasks.html"><a href="tasks.html#tasks-mutators"><i class="fa fa-check"></i><b>2.2.4.3</b> Task Mutators</a></li>
</ul></li>
<li class="chapter" data-level="2.2.5" data-path="tasks.html"><a href="tasks.html#autoplot-task"><i class="fa fa-check"></i><b>2.2.5</b> Plotting Tasks</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="learners.html"><a href="learners.html"><i class="fa fa-check"></i><b>2.3</b> Learners</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="learners.html"><a href="learners.html#predefined-learners"><i class="fa fa-check"></i><b>2.3.1</b> Predefined Learners</a></li>
<li class="chapter" data-level="2.3.2" data-path="learners.html"><a href="learners.html#learner-api"><i class="fa fa-check"></i><b>2.3.2</b> Learner API</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="train-predict.html"><a href="train-predict.html"><i class="fa fa-check"></i><b>2.4</b> Train, Predict, Score</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="train-predict.html"><a href="train-predict.html#train-predict-objects"><i class="fa fa-check"></i><b>2.4.1</b> Creating Task and Learner Objects</a></li>
<li class="chapter" data-level="2.4.2" data-path="train-predict.html"><a href="train-predict.html#split-data"><i class="fa fa-check"></i><b>2.4.2</b> Setting up the train/test splits of the data</a></li>
<li class="chapter" data-level="2.4.3" data-path="train-predict.html"><a href="train-predict.html#training"><i class="fa fa-check"></i><b>2.4.3</b> Training the learner</a></li>
<li class="chapter" data-level="2.4.4" data-path="train-predict.html"><a href="train-predict.html#predicting"><i class="fa fa-check"></i><b>2.4.4</b> Predicting</a></li>
<li class="chapter" data-level="2.4.5" data-path="train-predict.html"><a href="train-predict.html#predict-type"><i class="fa fa-check"></i><b>2.4.5</b> Changing the Predict Type</a></li>
<li class="chapter" data-level="2.4.6" data-path="train-predict.html"><a href="train-predict.html#autoplot-prediction"><i class="fa fa-check"></i><b>2.4.6</b> Plotting Predictions</a></li>
<li class="chapter" data-level="2.4.7" data-path="train-predict.html"><a href="train-predict.html#measure"><i class="fa fa-check"></i><b>2.4.7</b> Performance assessment</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="resampling.html"><a href="resampling.html"><i class="fa fa-check"></i><b>2.5</b> Resampling</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="resampling.html"><a href="resampling.html#resampling-settings"><i class="fa fa-check"></i><b>2.5.1</b> Settings</a></li>
<li class="chapter" data-level="2.5.2" data-path="resampling.html"><a href="resampling.html#resampling-inst"><i class="fa fa-check"></i><b>2.5.2</b> Instantiation</a></li>
<li class="chapter" data-level="2.5.3" data-path="resampling.html"><a href="resampling.html#resampling-exec"><i class="fa fa-check"></i><b>2.5.3</b> Execution</a></li>
<li class="chapter" data-level="2.5.4" data-path="resampling.html"><a href="resampling.html#resamp-custom"><i class="fa fa-check"></i><b>2.5.4</b> Custom resampling</a></li>
<li class="chapter" data-level="2.5.5" data-path="resampling.html"><a href="resampling.html#resampling-with-predefined-groups"><i class="fa fa-check"></i><b>2.5.5</b> Resampling with predefined groups</a></li>
<li class="chapter" data-level="2.5.6" data-path="resampling.html"><a href="resampling.html#autoplot-resampleresult"><i class="fa fa-check"></i><b>2.5.6</b> Plotting Resample Results</a></li>
<li class="chapter" data-level="2.5.7" data-path="resampling.html"><a href="resampling.html#autoplot-resample-partition"><i class="fa fa-check"></i><b>2.5.7</b> Plotting Resample Partitions</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="benchmarking.html"><a href="benchmarking.html"><i class="fa fa-check"></i><b>2.6</b> Benchmarking</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="benchmarking.html"><a href="benchmarking.html#bm-design"><i class="fa fa-check"></i><b>2.6.1</b> Design Creation</a></li>
<li class="chapter" data-level="2.6.2" data-path="benchmarking.html"><a href="benchmarking.html#bm-exec"><i class="fa fa-check"></i><b>2.6.2</b> Execution and Aggregation of Results</a></li>
<li class="chapter" data-level="2.6.3" data-path="benchmarking.html"><a href="benchmarking.html#autoplot-benchmarkresult"><i class="fa fa-check"></i><b>2.6.3</b> Plotting Benchmark Results</a></li>
<li class="chapter" data-level="2.6.4" data-path="benchmarking.html"><a href="benchmarking.html#bm-resamp"><i class="fa fa-check"></i><b>2.6.4</b> Extracting ResampleResults</a></li>
<li class="chapter" data-level="2.6.5" data-path="benchmarking.html"><a href="benchmarking.html#converting-and-merging"><i class="fa fa-check"></i><b>2.6.5</b> Converting and Merging</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="binary-classification.html"><a href="binary-classification.html"><i class="fa fa-check"></i><b>2.7</b> Binary classification</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="binary-classification.html"><a href="binary-classification.html#binary-roc"><i class="fa fa-check"></i><b>2.7.1</b> ROC Curve and Thresholds</a></li>
<li class="chapter" data-level="2.7.2" data-path="binary-classification.html"><a href="binary-classification.html#threshold-tuning"><i class="fa fa-check"></i><b>2.7.2</b> Threshold Tuning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>3</b> Model Optimization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tuning.html"><a href="tuning.html"><i class="fa fa-check"></i><b>3.1</b> Hyperparameter Tuning</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="tuning.html"><a href="tuning.html#tuning-optimization"><i class="fa fa-check"></i><b>3.1.1</b> The <code>TuningInstance*</code> Classes</a></li>
<li class="chapter" data-level="3.1.2" data-path="tuning.html"><a href="tuning.html#tuning-algorithms"><i class="fa fa-check"></i><b>3.1.2</b> The <code>Tuner</code> Class</a></li>
<li class="chapter" data-level="3.1.3" data-path="tuning.html"><a href="tuning.html#tuning-triggering"><i class="fa fa-check"></i><b>3.1.3</b> Triggering the Tuning</a></li>
<li class="chapter" data-level="3.1.4" data-path="tuning.html"><a href="tuning.html#autotuner"><i class="fa fa-check"></i><b>3.1.4</b> Automating the Tuning</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="searchspace.html"><a href="searchspace.html"><i class="fa fa-check"></i><b>3.2</b> Tuning Search Spaces</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="searchspace.html"><a href="searchspace.html#creating-paramsets"><i class="fa fa-check"></i><b>3.2.1</b> Creating <code>ParamSet</code>s</a></li>
<li class="chapter" data-level="3.2.2" data-path="searchspace.html"><a href="searchspace.html#searchspace-trafo"><i class="fa fa-check"></i><b>3.2.2</b> Transformations (<code>trafo</code>)</a></li>
<li class="chapter" data-level="3.2.3" data-path="searchspace.html"><a href="searchspace.html#autolevel"><i class="fa fa-check"></i><b>3.2.3</b> Automatic Factor Level Transformation</a></li>
<li class="chapter" data-level="3.2.4" data-path="searchspace.html"><a href="searchspace.html#searchspace-depends"><i class="fa fa-check"></i><b>3.2.4</b> Parameter Dependencies (<code>depends</code>)</a></li>
<li class="chapter" data-level="3.2.5" data-path="searchspace.html"><a href="searchspace.html#creating-tuning-paramsets-from-other-paramsets"><i class="fa fa-check"></i><b>3.2.5</b> Creating Tuning ParamSets from other ParamSets</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="nested-resampling.html"><a href="nested-resampling.html"><i class="fa fa-check"></i><b>3.3</b> Nested Resampling</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-exec"><i class="fa fa-check"></i><b>3.3.1</b> Execution</a></li>
<li class="chapter" data-level="3.3.2" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-eval"><i class="fa fa-check"></i><b>3.3.2</b> Evaluation</a></li>
<li class="chapter" data-level="3.3.3" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-final-model"><i class="fa fa-check"></i><b>3.3.3</b> Final Model</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="hyperband.html"><a href="hyperband.html"><i class="fa fa-check"></i><b>3.4</b> Tuning with Hyperband</a></li>
<li class="chapter" data-level="3.5" data-path="fs.html"><a href="fs.html"><i class="fa fa-check"></i><b>3.5</b> Feature Selection / Filtering</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="fs.html"><a href="fs.html#fs-filter"><i class="fa fa-check"></i><b>3.5.1</b> Filters</a></li>
<li class="chapter" data-level="3.5.2" data-path="fs.html"><a href="fs.html#fs-calc"><i class="fa fa-check"></i><b>3.5.2</b> Calculating filter values</a></li>
<li class="chapter" data-level="3.5.3" data-path="fs.html"><a href="fs.html#fs-var-imp-filters"><i class="fa fa-check"></i><b>3.5.3</b> Variable Importance Filters</a></li>
<li class="chapter" data-level="3.5.4" data-path="fs.html"><a href="fs.html#fs-wrapper"><i class="fa fa-check"></i><b>3.5.4</b> Wrapper Methods</a></li>
<li class="chapter" data-level="3.5.5" data-path="fs.html"><a href="fs.html#fs-wrapper-optimization"><i class="fa fa-check"></i><b>3.5.5</b> The <code>FSelectInstance</code> Classes</a></li>
<li class="chapter" data-level="3.5.6" data-path="fs.html"><a href="fs.html#the-fselector-class"><i class="fa fa-check"></i><b>3.5.6</b> The <code>FSelector</code> Class</a></li>
<li class="chapter" data-level="3.5.7" data-path="fs.html"><a href="fs.html#wrapper-selection-triggering"><i class="fa fa-check"></i><b>3.5.7</b> Triggering the Tuning</a></li>
<li class="chapter" data-level="3.5.8" data-path="fs.html"><a href="fs.html#autofselect"><i class="fa fa-check"></i><b>3.5.8</b> Automating the Feature Selection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>4</b> Pipelines</a>
<ul>
<li class="chapter" data-level="4.1" data-path="pipe-pipeops.html"><a href="pipe-pipeops.html"><i class="fa fa-check"></i><b>4.1</b> The Building Blocks: PipeOps</a></li>
<li class="chapter" data-level="4.2" data-path="pipe-operator.html"><a href="pipe-operator.html"><i class="fa fa-check"></i><b>4.2</b> The Pipeline Operator: <code>%&gt;&gt;%</code></a></li>
<li class="chapter" data-level="4.3" data-path="pipe-nodes-edges-graphs.html"><a href="pipe-nodes-edges-graphs.html"><i class="fa fa-check"></i><b>4.3</b> Nodes, Edges and Graphs</a></li>
<li class="chapter" data-level="4.4" data-path="pipe-modeling.html"><a href="pipe-modeling.html"><i class="fa fa-check"></i><b>4.4</b> Modeling</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-hyperpars"><i class="fa fa-check"></i><b>4.4.1</b> Setting Hyperparameters</a></li>
<li class="chapter" data-level="4.4.2" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-tuning"><i class="fa fa-check"></i><b>4.4.2</b> Tuning</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html"><i class="fa fa-check"></i><b>4.5</b> Non-Linear Graphs</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-branching-copying"><i class="fa fa-check"></i><b>4.5.1</b> Branching &amp; Copying</a></li>
<li class="chapter" data-level="4.5.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles"><i class="fa fa-check"></i><b>4.5.2</b> Model Ensembles</a>
<ul>
<li class="chapter" data-level="4.5.2.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-bagging"><i class="fa fa-check"></i><b>4.5.2.1</b> Bagging</a></li>
<li class="chapter" data-level="4.5.2.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-stacking"><i class="fa fa-check"></i><b>4.5.2.2</b> Stacking</a></li>
<li class="chapter" data-level="4.5.2.3" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#multilevel-stacking"><i class="fa fa-check"></i><b>4.5.2.3</b> Multilevel Stacking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html"><i class="fa fa-check"></i><b>4.6</b> Special Operators</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#imputation-pipeopimpute"><i class="fa fa-check"></i><b>4.6.1</b> Imputation: <code>PipeOpImpute</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-engineering-pipeopmutate"><i class="fa fa-check"></i><b>4.6.2</b> Feature Engineering: <code>PipeOpMutate</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#training-on-data-subsets-pipeopchunk"><i class="fa fa-check"></i><b>4.6.3</b> Training on data subsets: <code>PipeOpChunk</code></a></li>
<li class="chapter" data-level="4.6.4" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-selection-pipeopfilter-and-pipeopselect"><i class="fa fa-check"></i><b>4.6.4</b> Feature Selection: <code>PipeOpFilter</code> and <code>PipeOpSelect</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html"><i class="fa fa-check"></i><b>4.7</b> In-depth look into mlr3pipelines</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#whats-the-point"><i class="fa fa-check"></i><b>4.7.1</b> What’s the Point</a></li>
<li class="chapter" data-level="4.7.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-pipeline-operators"><i class="fa fa-check"></i><b>4.7.2</b> <code>PipeOp</code>: Pipeline Operators</a>
<ul>
<li class="chapter" data-level="4.7.2.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#why-the-state"><i class="fa fa-check"></i><b>4.7.2.1</b> Why the <code>$state</code></a></li>
<li class="chapter" data-level="4.7.2.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#where-to-get-pipeops"><i class="fa fa-check"></i><b>4.7.2.2</b> Where to Get <code>PipeOp</code>s</a></li>
</ul></li>
<li class="chapter" data-level="4.7.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-channels"><i class="fa fa-check"></i><b>4.7.3</b> PipeOp Channels</a>
<ul>
<li class="chapter" data-level="4.7.3.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#input-channels"><i class="fa fa-check"></i><b>4.7.3.1</b> Input Channels</a></li>
<li class="chapter" data-level="4.7.3.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#output-channels"><i class="fa fa-check"></i><b>4.7.3.2</b> Output Channels</a></li>
<li class="chapter" data-level="4.7.3.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#channel-configuration"><i class="fa fa-check"></i><b>4.7.3.3</b> Channel Configuration</a></li>
</ul></li>
<li class="chapter" data-level="4.7.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graph-networks-of-pipeops"><i class="fa fa-check"></i><b>4.7.4</b> <code>Graph</code>: Networks of <code>PipeOp</code>s</a>
<ul>
<li class="chapter" data-level="4.7.4.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#basics-1"><i class="fa fa-check"></i><b>4.7.4.1</b> Basics</a></li>
<li class="chapter" data-level="4.7.4.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#networks"><i class="fa fa-check"></i><b>4.7.4.2</b> Networks</a></li>
<li class="chapter" data-level="4.7.4.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#syntactic-sugar"><i class="fa fa-check"></i><b>4.7.4.3</b> Syntactic Sugar</a></li>
<li class="chapter" data-level="4.7.4.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-ids-and-id-name-clashes"><i class="fa fa-check"></i><b>4.7.4.4</b> <code>PipeOp</code> IDs and ID Name Clashes</a></li>
</ul></li>
<li class="chapter" data-level="4.7.5" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#learners-in-graphs-graphs-in-learners"><i class="fa fa-check"></i><b>4.7.5</b> Learners in Graphs, Graphs in Learners</a>
<ul>
<li class="chapter" data-level="4.7.5.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeoplearner"><i class="fa fa-check"></i><b>4.7.5.1</b> <code>PipeOpLearner</code></a></li>
<li class="chapter" data-level="4.7.5.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graphlearner"><i class="fa fa-check"></i><b>4.7.5.2</b> <code>GraphLearner</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7.6" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#hyperparameters"><i class="fa fa-check"></i><b>4.7.6</b> Hyperparameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical.html"><a href="technical.html"><i class="fa fa-check"></i><b>5</b> Technical</a>
<ul>
<li class="chapter" data-level="5.1" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>5.1</b> Parallelization</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="parallelization.html"><a href="parallelization.html#implicit-parallelization"><i class="fa fa-check"></i><b>5.1.1</b> Implicit Parallelization</a></li>
<li class="chapter" data-level="5.1.2" data-path="parallelization.html"><a href="parallelization.html#explicit-parallelization"><i class="fa fa-check"></i><b>5.1.2</b> Explicit Parallelization</a></li>
<li class="chapter" data-level="5.1.3" data-path="parallelization.html"><a href="parallelization.html#nested-resampling-parallelization"><i class="fa fa-check"></i><b>5.1.3</b> Nested Resampling Parallelization</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="error-handling.html"><a href="error-handling.html"><i class="fa fa-check"></i><b>5.2</b> Error Handling</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="error-handling.html"><a href="error-handling.html#encapsulation"><i class="fa fa-check"></i><b>5.2.1</b> Encapsulation</a></li>
<li class="chapter" data-level="5.2.2" data-path="error-handling.html"><a href="error-handling.html#fallback-learners"><i class="fa fa-check"></i><b>5.2.2</b> Fallback learners</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="backends.html"><a href="backends.html"><i class="fa fa-check"></i><b>5.3</b> Database Backends</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="backends.html"><a href="backends.html#use-case-nyc-flights"><i class="fa fa-check"></i><b>5.3.1</b> Use Case: NYC Flights</a></li>
<li class="chapter" data-level="5.3.2" data-path="backends.html"><a href="backends.html#preprocessing-with-dplyr"><i class="fa fa-check"></i><b>5.3.2</b> Preprocessing with <code>dplyr</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="backends.html"><a href="backends.html#databackenddplyr"><i class="fa fa-check"></i><b>5.3.3</b> DataBackendDplyr</a></li>
<li class="chapter" data-level="5.3.4" data-path="backends.html"><a href="backends.html#model-fitting"><i class="fa fa-check"></i><b>5.3.4</b> Model fitting</a></li>
<li class="chapter" data-level="5.3.5" data-path="backends.html"><a href="backends.html#cleanup"><i class="fa fa-check"></i><b>5.3.5</b> Cleanup</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="paradox.html"><a href="paradox.html"><i class="fa fa-check"></i><b>5.4</b> Parameters (using <code>paradox</code>)</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="paradox.html"><a href="paradox.html#reference-based-objects"><i class="fa fa-check"></i><b>5.4.1</b> Reference Based Objects</a></li>
<li class="chapter" data-level="5.4.2" data-path="paradox.html"><a href="paradox.html#defining-a-parameter-space"><i class="fa fa-check"></i><b>5.4.2</b> Defining a Parameter Space</a>
<ul>
<li class="chapter" data-level="5.4.2.1" data-path="paradox.html"><a href="paradox.html#single-parameters"><i class="fa fa-check"></i><b>5.4.2.1</b> Single Parameters</a></li>
<li class="chapter" data-level="5.4.2.2" data-path="paradox.html"><a href="paradox.html#parameter-sets"><i class="fa fa-check"></i><b>5.4.2.2</b> Parameter Sets</a></li>
<li class="chapter" data-level="5.4.2.3" data-path="paradox.html"><a href="paradox.html#vector-parameters"><i class="fa fa-check"></i><b>5.4.2.3</b> Vector Parameters</a></li>
</ul></li>
<li class="chapter" data-level="5.4.3" data-path="paradox.html"><a href="paradox.html#parameter-sampling"><i class="fa fa-check"></i><b>5.4.3</b> Parameter Sampling</a>
<ul>
<li class="chapter" data-level="5.4.3.1" data-path="paradox.html"><a href="paradox.html#parameter-designs"><i class="fa fa-check"></i><b>5.4.3.1</b> Parameter Designs</a></li>
<li class="chapter" data-level="5.4.3.2" data-path="paradox.html"><a href="paradox.html#grid-design"><i class="fa fa-check"></i><b>5.4.3.2</b> Grid Design</a></li>
<li class="chapter" data-level="5.4.3.3" data-path="paradox.html"><a href="paradox.html#random-sampling"><i class="fa fa-check"></i><b>5.4.3.3</b> Random Sampling</a></li>
<li class="chapter" data-level="5.4.3.4" data-path="paradox.html"><a href="paradox.html#generalized-sampling-the-sampler-class"><i class="fa fa-check"></i><b>5.4.3.4</b> Generalized Sampling: The <code>Sampler</code> Class</a></li>
</ul></li>
<li class="chapter" data-level="5.4.4" data-path="paradox.html"><a href="paradox.html#parameter-transformation"><i class="fa fa-check"></i><b>5.4.4</b> Parameter Transformation</a>
<ul>
<li class="chapter" data-level="5.4.4.1" data-path="paradox.html"><a href="paradox.html#transformation-between-types"><i class="fa fa-check"></i><b>5.4.4.1</b> Transformation between Types</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="logging.html"><a href="logging.html"><i class="fa fa-check"></i><b>5.5</b> Logging</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="logging.html"><a href="logging.html#changing-mlr3-logging-levels"><i class="fa fa-check"></i><b>5.5.1</b> Changing mlr3 logging levels</a></li>
<li class="chapter" data-level="5.5.2" data-path="logging.html"><a href="logging.html#redirecting-output"><i class="fa fa-check"></i><b>5.5.2</b> Redirecting output</a></li>
<li class="chapter" data-level="5.5.3" data-path="logging.html"><a href="logging.html#immediate-log-feedback"><i class="fa fa-check"></i><b>5.5.3</b> Immediate Log Feedback</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="extending.html"><a href="extending.html"><i class="fa fa-check"></i><b>6</b> Extending</a>
<ul>
<li class="chapter" data-level="6.1" data-path="extending-learners.html"><a href="extending-learners.html"><i class="fa fa-check"></i><b>6.1</b> Adding new Learners</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="extending-learners.html"><a href="extending-learners.html#setup"><i class="fa fa-check"></i><b>6.1.1</b> Setting-up mlr3extralearners</a></li>
<li class="chapter" data-level="6.1.2" data-path="extending-learners.html"><a href="extending-learners.html#create-learner"><i class="fa fa-check"></i><b>6.1.2</b> Calling create_learner</a></li>
<li class="chapter" data-level="6.1.3" data-path="extending-learners.html"><a href="extending-learners.html#learner_package_type_key.r"><i class="fa fa-check"></i><b>6.1.3</b> learner_package_type_key.R</a></li>
<li class="chapter" data-level="6.1.4" data-path="extending-learners.html"><a href="extending-learners.html#learner-meta-information"><i class="fa fa-check"></i><b>6.1.4</b> Meta-information</a></li>
<li class="chapter" data-level="6.1.5" data-path="extending-learners.html"><a href="extending-learners.html#param-set"><i class="fa fa-check"></i><b>6.1.5</b> ParamSet</a></li>
<li class="chapter" data-level="6.1.6" data-path="extending-learners.html"><a href="extending-learners.html#learner-train"><i class="fa fa-check"></i><b>6.1.6</b> Train function</a></li>
<li class="chapter" data-level="6.1.7" data-path="extending-learners.html"><a href="extending-learners.html#learner-predict"><i class="fa fa-check"></i><b>6.1.7</b> Predict function</a></li>
<li class="chapter" data-level="6.1.8" data-path="extending-learners.html"><a href="extending-learners.html#learner-control"><i class="fa fa-check"></i><b>6.1.8</b> Control objects/functions of learners</a></li>
<li class="chapter" data-level="6.1.9" data-path="extending-learners.html"><a href="extending-learners.html#learner-test"><i class="fa fa-check"></i><b>6.1.9</b> Testing the learner</a>
<ul>
<li class="chapter" data-level="6.1.9.1" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-manual"><i class="fa fa-check"></i><b>6.1.9.1</b> Train and Predict</a></li>
<li class="chapter" data-level="6.1.9.2" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-unit"><i class="fa fa-check"></i><b>6.1.9.2</b> Autotest</a></li>
<li class="chapter" data-level="6.1.9.3" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-parameter"><i class="fa fa-check"></i><b>6.1.9.3</b> Checking Parameters</a></li>
</ul></li>
<li class="chapter" data-level="6.1.10" data-path="extending-learners.html"><a href="extending-learners.html#cleaning"><i class="fa fa-check"></i><b>6.1.10</b> Package Cleaning</a></li>
<li class="chapter" data-level="6.1.11" data-path="extending-learners.html"><a href="extending-learners.html#thanks-and-maintenance"><i class="fa fa-check"></i><b>6.1.11</b> Thanks and Maintenance</a></li>
<li class="chapter" data-level="6.1.12" data-path="extending-learners.html"><a href="extending-learners.html#learner-faq"><i class="fa fa-check"></i><b>6.1.12</b> Learner FAQ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="extending-measures.html"><a href="extending-measures.html"><i class="fa fa-check"></i><b>6.2</b> Adding new Measures</a></li>
<li class="chapter" data-level="6.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html"><i class="fa fa-check"></i><b>6.3</b> Adding new PipeOps</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipeopcopy"><i class="fa fa-check"></i><b>6.3.1</b> General Case Example: <code>PipeOpCopy</code></a>
<ul>
<li class="chapter" data-level="6.3.1.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#first-steps-inheriting-from-pipeop"><i class="fa fa-check"></i><b>6.3.1.1</b> First Steps: Inheriting from <code>PipeOp</code></a></li>
<li class="chapter" data-level="6.3.1.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#channel-definitions"><i class="fa fa-check"></i><b>6.3.1.2</b> Channel Definitions</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html#train-and-predict"><i class="fa fa-check"></i><b>6.3.1.3</b> Train and Predict</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#putting-it-together"><i class="fa fa-check"></i><b>6.3.1.4</b> Putting it Together</a></li>
</ul></li>
<li class="chapter" data-level="6.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-preproc"><i class="fa fa-check"></i><b>6.3.2</b> Special Case: Preprocessing</a>
<ul>
<li class="chapter" data-level="6.3.2.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropna"><i class="fa fa-check"></i><b>6.3.2.1</b> Example: <code>PipeOpDropNA</code></a></li>
<li class="chapter" data-level="6.3.2.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealways"><i class="fa fa-check"></i><b>6.3.2.2</b> Example: <code>PipeOpScaleAlways</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html#special-case-preprocessing-with-simple-train"><i class="fa fa-check"></i><b>6.3.3</b> Special Case: Preprocessing with Simple Train</a>
<ul>
<li class="chapter" data-level="6.3.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropconst"><i class="fa fa-check"></i><b>6.3.3.1</b> Example: <code>PipeOpDropConst</code></a></li>
<li class="chapter" data-level="6.3.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealwayssimple"><i class="fa fa-check"></i><b>6.3.3.2</b> Example: <code>PipeOpScaleAlwaysSimple</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-hyperpars"><i class="fa fa-check"></i><b>6.3.4</b> Hyperparameters</a>
<ul>
<li class="chapter" data-level="6.3.4.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#hyperparameter-example-pipeopscale"><i class="fa fa-check"></i><b>6.3.4.1</b> Hyperparameter Example: <code>PipeOpScale</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="extending-tuners.html"><a href="extending-tuners.html"><i class="fa fa-check"></i><b>6.4</b> Adding new Tuners</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="extending-tuners.html"><a href="extending-tuners.html#extending-tuners-summary"><i class="fa fa-check"></i><b>6.4.1</b> Adding a new Tuner</a></li>
<li class="chapter" data-level="6.4.2" data-path="extending-tuners.html"><a href="extending-tuners.html#tuner-template"><i class="fa fa-check"></i><b>6.4.2</b> Template</a></li>
<li class="chapter" data-level="6.4.3" data-path="extending-tuners.html"><a href="extending-tuners.html#tuner-optimize"><i class="fa fa-check"></i><b>6.4.3</b> Optimize method</a>
<ul>
<li class="chapter" data-level="6.4.3.1" data-path="extending-tuners.html"><a href="extending-tuners.html#writing-a-custom-iteration"><i class="fa fa-check"></i><b>6.4.3.1</b> Writing a custom iteration</a></li>
<li class="chapter" data-level="6.4.3.2" data-path="extending-tuners.html"><a href="extending-tuners.html#calling-an-external-optimization-function"><i class="fa fa-check"></i><b>6.4.3.2</b> Calling an external optimization function</a></li>
</ul></li>
<li class="chapter" data-level="6.4.4" data-path="extending-tuners.html"><a href="extending-tuners.html#tuner-add-result"><i class="fa fa-check"></i><b>6.4.4</b> Assign result method</a></li>
<li class="chapter" data-level="6.4.5" data-path="extending-tuners.html"><a href="extending-tuners.html#tuner-from-optimizer"><i class="fa fa-check"></i><b>6.4.5</b> Transform optimizer to tuner</a></li>
<li class="chapter" data-level="6.4.6" data-path="extending-tuners.html"><a href="extending-tuners.html#tuner-test"><i class="fa fa-check"></i><b>6.4.6</b> Add unit tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="special-tasks.html"><a href="special-tasks.html"><i class="fa fa-check"></i><b>7</b> Special Tasks</a>
<ul>
<li class="chapter" data-level="7.1" data-path="survival.html"><a href="survival.html"><i class="fa fa-check"></i><b>7.1</b> Survival Analysis</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="survival.html"><a href="survival.html#tasksurv"><i class="fa fa-check"></i><b>7.1.1</b> TaskSurv</a></li>
<li class="chapter" data-level="7.1.2" data-path="survival.html"><a href="survival.html#predict-types---crank-lp-and-distr"><i class="fa fa-check"></i><b>7.1.2</b> Predict Types - crank, lp, and distr</a></li>
<li class="chapter" data-level="7.1.3" data-path="survival.html"><a href="survival.html#composition"><i class="fa fa-check"></i><b>7.1.3</b> Composition</a></li>
<li class="chapter" data-level="7.1.4" data-path="survival.html"><a href="survival.html#benchmark-experiment"><i class="fa fa-check"></i><b>7.1.4</b> Benchmark Experiment</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="density.html"><a href="density.html"><i class="fa fa-check"></i><b>7.2</b> Density Estimation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="density.html"><a href="density.html#train-and-predict-1"><i class="fa fa-check"></i><b>7.2.1</b> Train and Predict</a></li>
<li class="chapter" data-level="7.2.2" data-path="density.html"><a href="density.html#benchmark-experiment-1"><i class="fa fa-check"></i><b>7.2.2</b> Benchmark Experiment</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="spatiotemporal.html"><a href="spatiotemporal.html"><i class="fa fa-check"></i><b>7.3</b> Spatiotemporal Analysis</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="spatiotemporal.html"><a href="spatiotemporal.html#creating-a-spatial-task"><i class="fa fa-check"></i><b>7.3.1</b> Creating a spatial Task</a></li>
<li class="chapter" data-level="7.3.2" data-path="spatiotemporal.html"><a href="spatiotemporal.html#spatiotemporal-intro"><i class="fa fa-check"></i><b>7.3.2</b> Autocorrelation</a></li>
<li class="chapter" data-level="7.3.3" data-path="spatiotemporal.html"><a href="spatiotemporal.html#sp-vs-nsp-cv"><i class="fa fa-check"></i><b>7.3.3</b> Spatial CV vs. Non-Spatial CV</a>
<ul>
<li class="chapter" data-level="7.3.3.1" data-path="spatiotemporal.html"><a href="spatiotemporal.html#nsp-cv"><i class="fa fa-check"></i><b>7.3.3.1</b> Non-Spatial CV</a></li>
<li class="chapter" data-level="7.3.3.2" data-path="spatiotemporal.html"><a href="spatiotemporal.html#sp-cv"><i class="fa fa-check"></i><b>7.3.3.2</b> Spatial CV</a></li>
</ul></li>
<li class="chapter" data-level="7.3.4" data-path="spatiotemporal.html"><a href="spatiotemporal.html#vis-spt-partitions"><i class="fa fa-check"></i><b>7.3.4</b> Visualization of Spatiotemporal Partitions</a></li>
<li class="chapter" data-level="7.3.5" data-path="spatiotemporal.html"><a href="spatiotemporal.html#vis-spatial-block"><i class="fa fa-check"></i><b>7.3.5</b> Spatial Block Visualization</a></li>
<li class="chapter" data-level="7.3.6" data-path="spatiotemporal.html"><a href="spatiotemporal.html#choose-spt-rsmp"><i class="fa fa-check"></i><b>7.3.6</b> Choosing a Resampling Method</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ordinal.html"><a href="ordinal.html"><i class="fa fa-check"></i><b>7.4</b> Ordinal Analysis</a></li>
<li class="chapter" data-level="7.5" data-path="functional.html"><a href="functional.html"><i class="fa fa-check"></i><b>7.5</b> Functional Analysis</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="functional.html"><a href="functional.html#how-to-model-functional-data"><i class="fa fa-check"></i><b>7.5.1</b> How to model functional data?</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="multilabel.html"><a href="multilabel.html"><i class="fa fa-check"></i><b>7.6</b> Multilabel Classification</a></li>
<li class="chapter" data-level="7.7" data-path="cost-sens.html"><a href="cost-sens.html"><i class="fa fa-check"></i><b>7.7</b> Cost-Sensitive Classification</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="cost-sens.html"><a href="cost-sens.html#a-first-model"><i class="fa fa-check"></i><b>7.7.1</b> A First Model</a></li>
<li class="chapter" data-level="7.7.2" data-path="cost-sens.html"><a href="cost-sens.html#cost-sensitive-measure"><i class="fa fa-check"></i><b>7.7.2</b> Cost-sensitive Measure</a></li>
<li class="chapter" data-level="7.7.3" data-path="cost-sens.html"><a href="cost-sens.html#thresholding"><i class="fa fa-check"></i><b>7.7.3</b> Thresholding</a></li>
<li class="chapter" data-level="7.7.4" data-path="cost-sens.html"><a href="cost-sens.html#threshold-tuning-1"><i class="fa fa-check"></i><b>7.7.4</b> Threshold Tuning</a></li>
<li class="chapter" data-level="7.7.5" data-path="cost-sens.html"><a href="cost-sens.html#adjusting-thresholds-two-strategies"><i class="fa fa-check"></i><b>7.7.5</b> Adjusting thresholds: Two strategies</a></li>
<li class="chapter" data-level="7.7.6" data-path="cost-sens.html"><a href="cost-sens.html#pipeopthreshold"><i class="fa fa-check"></i><b>7.7.6</b> PipeOpThreshold</a></li>
<li class="chapter" data-level="7.7.7" data-path="cost-sens.html"><a href="cost-sens.html#pipeoptunethreshold"><i class="fa fa-check"></i><b>7.7.7</b> PipeOpTunethreshold</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="interpretation.html"><a href="interpretation.html"><i class="fa fa-check"></i><b>8</b> Model Interpretation</a>
<ul>
<li class="chapter" data-level="8.1" data-path="iml.html"><a href="iml.html"><i class="fa fa-check"></i><b>8.1</b> IML</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="iml.html"><a href="iml.html#penguin-task"><i class="fa fa-check"></i><b>8.1.1</b> Penguin Task</a></li>
<li class="chapter" data-level="8.1.2" data-path="iml.html"><a href="iml.html#featureeffects"><i class="fa fa-check"></i><b>8.1.2</b> FeatureEffects</a></li>
<li class="chapter" data-level="8.1.3" data-path="iml.html"><a href="iml.html#shapley"><i class="fa fa-check"></i><b>8.1.3</b> Shapley</a></li>
<li class="chapter" data-level="8.1.4" data-path="iml.html"><a href="iml.html#featureimp"><i class="fa fa-check"></i><b>8.1.4</b> FeatureImp</a></li>
<li class="chapter" data-level="8.1.5" data-path="iml.html"><a href="iml.html#independent-test-data"><i class="fa fa-check"></i><b>8.1.5</b> Independent Test Data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="dalex.html"><a href="dalex.html"><i class="fa fa-check"></i><b>8.2</b> DALEX</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="dalex.html"><a href="dalex.html#interpretability-dalex-introduction"><i class="fa fa-check"></i><b>8.2.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2.2" data-path="dalex.html"><a href="dalex.html#interpretability-data-fifa"><i class="fa fa-check"></i><b>8.2.2</b> Read data: FIFA</a></li>
<li class="chapter" data-level="8.2.3" data-path="dalex.html"><a href="dalex.html#interpretability-train-ranger"><i class="fa fa-check"></i><b>8.2.3</b> Train a model: Ranger</a></li>
<li class="chapter" data-level="8.2.4" data-path="dalex.html"><a href="dalex.html#interpretability-architecture"><i class="fa fa-check"></i><b>8.2.4</b> The general workflow</a></li>
<li class="chapter" data-level="8.2.5" data-path="dalex.html"><a href="dalex.html#interpretability-dataset-level"><i class="fa fa-check"></i><b>8.2.5</b> Dataset level exploration</a></li>
<li class="chapter" data-level="8.2.6" data-path="dalex.html"><a href="dalex.html#interpretability-instance-level"><i class="fa fa-check"></i><b>8.2.6</b> Instance level explanation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>9</b> Appendix</a>
<ul>
<li class="chapter" data-level="9.1" data-path="list-learners.html"><a href="list-learners.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Learners</a></li>
<li class="chapter" data-level="9.2" data-path="list-measures.html"><a href="list-measures.html"><i class="fa fa-check"></i><b>9.2</b> Integrated Performance Measures</a></li>
<li class="chapter" data-level="9.3" data-path="list-filters.html"><a href="list-filters.html"><i class="fa fa-check"></i><b>9.3</b> Integrated Filter Methods</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="list-filters.html"><a href="list-filters.html#fs-filter-list"><i class="fa fa-check"></i><b>9.3.1</b> Standalone filter methods</a></li>
<li class="chapter" data-level="9.3.2" data-path="list-filters.html"><a href="list-filters.html#fs-filter-embedded-list"><i class="fa fa-check"></i><b>9.3.2</b> Learners With Embedded Filter Methods</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="list-pipeops.html"><a href="list-pipeops.html"><i class="fa fa-check"></i><b>9.4</b> Integrated Pipe Operators</a></li>
<li class="chapter" data-level="9.5" data-path="compare-frameworks.html"><a href="compare-frameworks.html"><i class="fa fa-check"></i><b>9.5</b> Framework Comparison</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#an-introduction-to-pipeops"><i class="fa fa-check"></i><b>9.5.1</b> An introduction to “PipeOp”s</a>
<ul>
<li class="chapter" data-level="9.5.1.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#a-quick-glance-into-a-pipeop"><i class="fa fa-check"></i><b>9.5.1.1</b> A quick glance into a PipeOp</a></li>
<li class="chapter" data-level="9.5.1.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#constructing-the-pipeline"><i class="fa fa-check"></i><b>9.5.1.2</b> Constructing the Pipeline</a></li>
</ul></li>
<li class="chapter" data-level="9.5.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.-mlr"><i class="fa fa-check"></i><b>9.5.2</b> mlr3pipelines vs. mlr</a>
<ul>
<li class="chapter" data-level="9.5.2.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr"><i class="fa fa-check"></i><b>9.5.2.1</b> mlr</a></li>
<li class="chapter" data-level="9.5.2.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines"><i class="fa fa-check"></i><b>9.5.2.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.3" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.-sklearn.pipeline.pipeline"><i class="fa fa-check"></i><b>9.5.3</b> mlr3pipelines vs. sklearn.pipeline.Pipeline</a>
<ul>
<li class="chapter" data-level="9.5.3.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#sklearn"><i class="fa fa-check"></i><b>9.5.3.1</b> sklearn</a></li>
<li class="chapter" data-level="9.5.3.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-1"><i class="fa fa-check"></i><b>9.5.3.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.4" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs-recipes"><i class="fa fa-check"></i><b>9.5.4</b> mlr3pipelines vs recipes</a>
<ul>
<li class="chapter" data-level="9.5.4.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#recipes"><i class="fa fa-check"></i><b>9.5.4.1</b> recipes</a></li>
<li class="chapter" data-level="9.5.4.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-2"><i class="fa fa-check"></i><b>9.5.4.2</b> mlr3pipelines</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">mlr3 book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dalex" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> DALEX</h2>
<p><em>Authors: <a href="https://github.com/pbiecek">Przemysław Biecek</a>, <a href="https://github.com/maksymiuks">Szymon Maksymiuk</a></em></p>
<div id="interpretability-dalex-introduction" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Introduction</h3>
<p>The <a href="https://cran.r-project.org/package=DALEX">DALEX</a> package X-rays any predictive model and helps to explore, explain and visualize its behaviour. The package implements a collection of methods for <a href="https://pbiecek.github.io/ema/">Explanatory Model Analysis</a>. It is based on a unified grammar summarised in Figure <a href="dalex.html#fig:08-interpretation-dalex-001">8.7</a>.</p>
<p>In the following sections, we will present subsequent methods available in the DALEX package based on a random forest model trained for football players worth prediction on the FIFA 20 data. We will show both methods analyzing the model at the level of a single prediction and the global level - for the whole data set.</p>
<p>The structure of this chapter is the following:</p>
<ul>
<li>In Section <a href="dalex.html#interpretability-data-fifa">8.2.2</a> we introduce the FIFA 20 dataset and then in section <a href="dalex.html#interpretability-train-ranger">8.2.3</a> we train a random regression forest using the <a href="https://cran.r-project.org/package=ranger">ranger</a> package.</li>
<li>Section <a href="dalex.html#interpretability-architecture">8.2.4</a> introduces general logic beyond DALEX explainers.</li>
<li>Section <a href="dalex.html#interpretability-dataset-level">8.2.5</a> introduces methods for dataset level model exploration.</li>
<li>Section <a href="dalex.html#interpretability-instance-level">8.2.6</a> introduces methods for instance-level model exploration.</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:08-interpretation-dalex-001"></span>
<img src="images/DALEX_ema.png" alt="Taxonomy of methods for model exploration presented in this chapter. Left part overview methods for instance level exploration while right part is related to dataset level model exploration." width="92%" />
<p class="caption">
Figure 8.7: Taxonomy of methods for model exploration presented in this chapter. Left part overview methods for instance level exploration while right part is related to dataset level model exploration.
</p>
</div>
</div>
<div id="interpretability-data-fifa" class="section level3" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Read data: FIFA</h3>
<p>Examples presented in this chapter are based on data retrieved from the FIFA video game. We will use the data scrapped from the <a href="https://sofifa.com/">sofifa</a> website. The raw data is available at <a href="https://www.kaggle.com/stefanoleone992/fifa-20-complete-player-dataset">kaggle</a>. After some basic data cleaning, the processed data for the top 5000 football players is available in the DALEX package under the name <code>fifa</code>.</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="dalex.html#cb822-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;DALEX&quot;</span>)</span>
<span id="cb822-2"><a href="dalex.html#cb822-2" aria-hidden="true" tabindex="-1"></a>fifa[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="fu">c</span>(<span class="st">&quot;value_eur&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;height_cm&quot;</span>, <span class="st">&quot;nationality&quot;</span>, <span class="st">&quot;attacking_crossing&quot;</span>)]</span></code></pre></div>
<pre><code>##                   value_eur age height_cm nationality attacking_crossing
## L. Messi           95500000  32       170   Argentina                 88
## Cristiano Ronaldo  58500000  34       187    Portugal                 84</code></pre>
<p>For every player, we have 42 features available.</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="dalex.html#cb824-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(fifa)</span></code></pre></div>
<pre><code>## [1] 5000   42</code></pre>
<p>In the table below we overview these 42 features for three selected players.
One of the features, called <code>value_eur</code>, is the worth of the footballer in euros. In the next section, we will build a prediction model, which will estimate the worth of the player based on other player characteristics.</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Lionel Messi</th>
<th align="left">Cristiano Ronaldo</th>
<th align="left">Neymar Junior</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">wage_eur</td>
<td align="left">565000</td>
<td align="left">405000</td>
<td align="left">290000</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">32</td>
<td align="left">34</td>
<td align="left">27</td>
</tr>
<tr class="odd">
<td align="left">height_cm</td>
<td align="left">170</td>
<td align="left">187</td>
<td align="left">175</td>
</tr>
<tr class="even">
<td align="left">weight_kg</td>
<td align="left">72</td>
<td align="left">83</td>
<td align="left">68</td>
</tr>
<tr class="odd">
<td align="left">nationality</td>
<td align="left">Argentina</td>
<td align="left">Portugal</td>
<td align="left">Brazil</td>
</tr>
<tr class="even">
<td align="left">overall</td>
<td align="left">94</td>
<td align="left">93</td>
<td align="left">92</td>
</tr>
<tr class="odd">
<td align="left">potential</td>
<td align="left">94</td>
<td align="left">93</td>
<td align="left">92</td>
</tr>
<tr class="even">
<td align="left">value_eur</td>
<td align="left">95 500 000</td>
<td align="left">58 500 000</td>
<td align="left">105 500 000</td>
</tr>
<tr class="odd">
<td align="left">attacking_crossing</td>
<td align="left">88</td>
<td align="left">84</td>
<td align="left">87</td>
</tr>
<tr class="even">
<td align="left">attacking_finishing</td>
<td align="left">95</td>
<td align="left">94</td>
<td align="left">87</td>
</tr>
<tr class="odd">
<td align="left">attacking_heading_accuracy</td>
<td align="left">70</td>
<td align="left">89</td>
<td align="left">62</td>
</tr>
<tr class="even">
<td align="left">attacking_short_passing</td>
<td align="left">92</td>
<td align="left">83</td>
<td align="left">87</td>
</tr>
<tr class="odd">
<td align="left">attacking_volleys</td>
<td align="left">88</td>
<td align="left">87</td>
<td align="left">87</td>
</tr>
<tr class="even">
<td align="left">skill_dribbling</td>
<td align="left">97</td>
<td align="left">89</td>
<td align="left">96</td>
</tr>
<tr class="odd">
<td align="left">skill_curve</td>
<td align="left">93</td>
<td align="left">81</td>
<td align="left">88</td>
</tr>
<tr class="even">
<td align="left">skill_fk_accuracy</td>
<td align="left">94</td>
<td align="left">76</td>
<td align="left">87</td>
</tr>
<tr class="odd">
<td align="left">skill_long_passing</td>
<td align="left">92</td>
<td align="left">77</td>
<td align="left">81</td>
</tr>
<tr class="even">
<td align="left">skill_ball_control</td>
<td align="left">96</td>
<td align="left">92</td>
<td align="left">95</td>
</tr>
<tr class="odd">
<td align="left">movement_acceleration</td>
<td align="left">91</td>
<td align="left">89</td>
<td align="left">94</td>
</tr>
<tr class="even">
<td align="left">movement_sprint_speed</td>
<td align="left">84</td>
<td align="left">91</td>
<td align="left">89</td>
</tr>
<tr class="odd">
<td align="left">movement_agility</td>
<td align="left">93</td>
<td align="left">87</td>
<td align="left">96</td>
</tr>
<tr class="even">
<td align="left">movement_reactions</td>
<td align="left">95</td>
<td align="left">96</td>
<td align="left">92</td>
</tr>
<tr class="odd">
<td align="left">movement_balance</td>
<td align="left">95</td>
<td align="left">71</td>
<td align="left">84</td>
</tr>
<tr class="even">
<td align="left">power_shot_power</td>
<td align="left">86</td>
<td align="left">95</td>
<td align="left">80</td>
</tr>
<tr class="odd">
<td align="left">power_jumping</td>
<td align="left">68</td>
<td align="left">95</td>
<td align="left">61</td>
</tr>
<tr class="even">
<td align="left">power_stamina</td>
<td align="left">75</td>
<td align="left">85</td>
<td align="left">81</td>
</tr>
<tr class="odd">
<td align="left">power_strength</td>
<td align="left">68</td>
<td align="left">78</td>
<td align="left">49</td>
</tr>
<tr class="even">
<td align="left">power_long_shots</td>
<td align="left">94</td>
<td align="left">93</td>
<td align="left">84</td>
</tr>
<tr class="odd">
<td align="left">mentality_aggression</td>
<td align="left">48</td>
<td align="left">63</td>
<td align="left">51</td>
</tr>
<tr class="even">
<td align="left">mentality_interceptions</td>
<td align="left">40</td>
<td align="left">29</td>
<td align="left">36</td>
</tr>
<tr class="odd">
<td align="left">mentality_positioning</td>
<td align="left">94</td>
<td align="left">95</td>
<td align="left">87</td>
</tr>
<tr class="even">
<td align="left">mentality_vision</td>
<td align="left">94</td>
<td align="left">82</td>
<td align="left">90</td>
</tr>
<tr class="odd">
<td align="left">mentality_penalties</td>
<td align="left">75</td>
<td align="left">85</td>
<td align="left">90</td>
</tr>
<tr class="even">
<td align="left">mentality_composure</td>
<td align="left">96</td>
<td align="left">95</td>
<td align="left">94</td>
</tr>
<tr class="odd">
<td align="left">defending_marking</td>
<td align="left">33</td>
<td align="left">28</td>
<td align="left">27</td>
</tr>
<tr class="even">
<td align="left">defending_standing_tackle</td>
<td align="left">37</td>
<td align="left">32</td>
<td align="left">26</td>
</tr>
<tr class="odd">
<td align="left">defending_sliding_tackle</td>
<td align="left">26</td>
<td align="left">24</td>
<td align="left">29</td>
</tr>
<tr class="even">
<td align="left">goalkeeping_diving</td>
<td align="left">6</td>
<td align="left">7</td>
<td align="left">9</td>
</tr>
<tr class="odd">
<td align="left">goalkeeping_handling</td>
<td align="left">11</td>
<td align="left">11</td>
<td align="left">9</td>
</tr>
<tr class="even">
<td align="left">goalkeeping_kicking</td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">15</td>
</tr>
<tr class="odd">
<td align="left">goalkeeping_positioning</td>
<td align="left">14</td>
<td align="left">14</td>
<td align="left">15</td>
</tr>
<tr class="even">
<td align="left">goalkeeping_reflexes</td>
<td align="left">8</td>
<td align="left">11</td>
<td align="left">11</td>
</tr>
</tbody>
</table>
<p>In order to get a more stable model we remove four variables i.e. <code>nationality</code>, <code>overall</code>, <code>potential</code>, <code>wage_eur</code>.</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="dalex.html#cb826-1" aria-hidden="true" tabindex="-1"></a>fifa[,<span class="fu">c</span>(<span class="st">&#39;nationality&#39;</span>, <span class="st">&#39;overall&#39;</span>, <span class="st">&#39;potential&#39;</span>, <span class="st">&#39;wage_eur&#39;</span>)] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb826-2"><a href="dalex.html#cb826-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(fifa))           fifa[,i] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(fifa[,i])</span></code></pre></div>
</div>
<div id="interpretability-train-ranger" class="section level3" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Train a model: Ranger</h3>
<p>The <code>DALEX</code> package works for any model regardless of its internal structure. Examples of how this package works are shown on a random forest model implemented in the <a href="https://cran.r-project.org/package=ranger">ranger</a> package.</p>
<p>We use the <code>mlr3</code> package to build a predictive model.
First, let’s load the required packages.</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="dalex.html#cb827-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mlr3&quot;</span>)</span>
<span id="cb827-2"><a href="dalex.html#cb827-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mlr3learners&quot;</span>)</span></code></pre></div>
<p>Then we can define the regression task - prediction of the <code>value_eur</code> variable:</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="dalex.html#cb828-1" aria-hidden="true" tabindex="-1"></a>fifa_task <span class="ot">&lt;-</span> <span class="fu">as_task_regr</span>(fifa, <span class="at">target =</span> <span class="st">&quot;value_eur&quot;</span>)</span></code></pre></div>
<p>Finally, we train mlr3’s <a href="https://mlr3learners.mlr-org.com/reference/mlr_learners_regr.ranger.html"><code>ranger learner</code></a> with 250 trees. Note that in this example for brevity we do not split the data into a train/test data. The model is built on the whole data.</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="dalex.html#cb829-1" aria-hidden="true" tabindex="-1"></a>fifa_ranger <span class="ot">&lt;-</span> <span class="fu">lrn</span>(<span class="st">&quot;regr.ranger&quot;</span>)</span>
<span id="cb829-2"><a href="dalex.html#cb829-2" aria-hidden="true" tabindex="-1"></a>fifa_ranger<span class="sc">$</span>param_set<span class="sc">$</span>values <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">num.trees =</span> <span class="dv">250</span>)</span>
<span id="cb829-3"><a href="dalex.html#cb829-3" aria-hidden="true" tabindex="-1"></a>fifa_ranger<span class="sc">$</span><span class="fu">train</span>(fifa_task)</span>
<span id="cb829-4"><a href="dalex.html#cb829-4" aria-hidden="true" tabindex="-1"></a>fifa_ranger</span></code></pre></div>
<pre><code>## &lt;LearnerRegrRanger:regr.ranger&gt;
## * Model: ranger
## * Parameters: num.trees=250
## * Packages: ranger
## * Predict Type: response
## * Feature types: logical, integer, numeric, character, factor, ordered
## * Properties: importance, oob_error, weights</code></pre>
</div>
<div id="interpretability-architecture" class="section level3" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> The general workflow</h3>
<p>Working with explanations in the DALEX package always consists of three steps schematically shown in the pipe below.</p>
<pre><code>model %&gt;%
  explain_mlr3(data = ..., y = ..., label = ...) %&gt;%
  model_parts() %&gt;%
  plot()</code></pre>
<ol style="list-style-type: decimal">
<li><p>All functions in the DALEX package can work for models with any structure. It is possible because in the first step we create an adapter that allows the downstream functions to access the model in a consistent fashion. In general, such an adapter is created with <a href="https://www.rdocumentation.org/packages/DALEX/topics/explain.default"><code>DALEX::explain.default()</code></a> function, but for models created in the <code>mlr3</code> package it is more convenient to use the <a href="https://www.rdocumentation.org/packages/DALEXtra/topics/explain_mlr3"><code>DALEXtra::explain_mlr3()</code></a>.</p></li>
<li><p>Explanations are determined by the functions <a href="https://www.rdocumentation.org/packages/DALEX/topics/model_parts"><code>DALEX::model_parts()</code></a>, <a href="https://www.rdocumentation.org/packages/DALEX/topics/model_profile"><code>DALEX::model_profile()</code></a>, <a href="https://www.rdocumentation.org/packages/DALEX/topics/predict_parts"><code>DALEX::predict_parts()</code></a> and <a href="https://www.rdocumentation.org/packages/DALEX/topics/predict_profile"><code>DALEX::predict_profile()</code></a>. Each of these functions takes the model adapter as its first argument. The other arguments describe how the function works. We will present them in the following section.</p></li>
<li><p>Explanations can be visualized with the generic function <code>plot</code> or summarised with the generic function <a href="https://www.rdocumentation.org/packages/base/topics/print"><code>print()</code></a>. Each explanation is a data frame with an additional class attribute. The <code>plot</code> function creates graphs using the <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a> package, so they can be easily modified with usual <code>ggplot2</code> decorators.</p></li>
</ol>
<p>We show this cascade of functions based on the FIFA example.</p>
<p>To get started with the exploration of the model behaviour we need to create an explainer. <a href="https://www.rdocumentation.org/packages/DALEX/topics/explain.default"><code>DALEX::explain.default</code></a> function handles is for all types of predictive models. In the <a href="https://cran.r-project.org/package=DALEXtra">DALEXtra</a> package there generic versions for the most common ML frameworks. Among them the <a href="https://www.rdocumentation.org/packages/DALEXtra/topics/explain_mlr3"><code>DALEXtra::explain_mlr3()</code></a> function works for <code>mlr3</code> models.</p>
<p>This function performs a series of internal checks so the output is a bit verbose. Turn the <code>verbose = FALSE</code> argument to make it less wordy.</p>
<div class="sourceCode" id="cb832"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb832-1"><a href="dalex.html#cb832-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;DALEX&quot;</span>)</span>
<span id="cb832-2"><a href="dalex.html#cb832-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;DALEXtra&quot;</span>)</span>
<span id="cb832-3"><a href="dalex.html#cb832-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-4"><a href="dalex.html#cb832-4" aria-hidden="true" tabindex="-1"></a>ranger_exp <span class="ot">&lt;-</span> <span class="fu">explain_mlr3</span>(fifa_ranger,</span>
<span id="cb832-5"><a href="dalex.html#cb832-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">data     =</span> fifa,</span>
<span id="cb832-6"><a href="dalex.html#cb832-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">y        =</span> fifa<span class="sc">$</span>value_eur,</span>
<span id="cb832-7"><a href="dalex.html#cb832-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">label    =</span> <span class="st">&quot;Ranger RF&quot;</span>,</span>
<span id="cb832-8"><a href="dalex.html#cb832-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">colorize =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Preparation of a new explainer is initiated
##   -&gt; model label       :  Ranger RF 
##   -&gt; data              :  5000  rows  38  cols 
##   -&gt; target variable   :  5000  values 
##   -&gt; predict function  :  yhat.LearnerRegr  will be used (  default  )
##   -&gt; predicted values  :  No value for predict function target column. (  default  )
##   -&gt; model_info        :  package mlr3 , ver. 0.11.0 , task regression (  default  ) 
##   -&gt; predicted values  :  numerical, min =  485858 , mean =  7475806 , max =  88362800  
##   -&gt; residual function :  difference between y and yhat (  default  )
##   -&gt; residuals         :  numerical, min =  -8880380 , mean =  -2519 , max =  17738067  
##   A new explainer has been created!</code></pre>
</div>
<div id="interpretability-dataset-level" class="section level3" number="8.2.5">
<h3><span class="header-section-number">8.2.5</span> Dataset level exploration</h3>
<p>The <a href="https://www.rdocumentation.org/packages/DALEX/topics/model_parts"><code>DALEX::model_parts()</code></a> function calculates the importance of variables using the <a href="https://pbiecek.github.io/ema/featureImportance.html">permutations based importance</a>.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="dalex.html#cb834-1" aria-hidden="true" tabindex="-1"></a>fifa_vi <span class="ot">&lt;-</span> <span class="fu">model_parts</span>(ranger_exp)</span>
<span id="cb834-2"><a href="dalex.html#cb834-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(fifa_vi)</span></code></pre></div>
<pre><code>##               variable mean_dropout_loss     label
## 1         _full_model_           1353860 Ranger RF
## 2            value_eur           1353860 Ranger RF
## 3            weight_kg           1412486 Ranger RF
## 4            height_cm           1420409 Ranger RF
## 5 mentality_aggression           1424649 Ranger RF
## 6     movement_balance           1426074 Ranger RF</code></pre>
<p>Results can be visualized with generic <code>plot()</code>. The chart for all 38 variables would be unreadable, so with the <code>max_vars</code> argument, we limit the number of variables on the plot.</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb836-1"><a href="dalex.html#cb836-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fifa_vi, <span class="at">max_vars =</span> <span class="dv">12</span>, <span class="at">show_boxplots =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="08-interpretation-dalex_files/figure-html/08-interpretation-dalex-011-1.svg" width="768" style="display: block; margin: auto;" /></p>
<p>Once we know which variables are most important, we can use <a href="https://pbiecek.github.io/ema/partialDependenceProfiles.html">Partial Dependence Plots</a> to show how the model, on average, changes with changes in selected variables. In this example, they show the average relation between the particular variables and players’ value.</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb837-1"><a href="dalex.html#cb837-1" aria-hidden="true" tabindex="-1"></a>selected_variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;movement_reactions&quot;</span>,</span>
<span id="cb837-2"><a href="dalex.html#cb837-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;skill_ball_control&quot;</span>, <span class="st">&quot;skill_dribbling&quot;</span>)</span>
<span id="cb837-3"><a href="dalex.html#cb837-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-4"><a href="dalex.html#cb837-4" aria-hidden="true" tabindex="-1"></a>fifa_pd <span class="ot">&lt;-</span> <span class="fu">model_profile</span>(ranger_exp,</span>
<span id="cb837-5"><a href="dalex.html#cb837-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">variables =</span> selected_variables)<span class="sc">$</span>agr_profiles</span>
<span id="cb837-6"><a href="dalex.html#cb837-6" aria-hidden="true" tabindex="-1"></a>fifa_pd</span></code></pre></div>
<pre><code>## Top profiles    : 
##              _vname_   _label_ _x_  _yhat_ _ids_
## 1 skill_ball_control Ranger RF   5 8765584     0
## 2    skill_dribbling Ranger RF   7 9162008     0
## 3    skill_dribbling Ranger RF  11 9151027     0
## 4    skill_dribbling Ranger RF  12 9151946     0
## 5    skill_dribbling Ranger RF  13 9151397     0
## 6    skill_dribbling Ranger RF  14 9149144     0</code></pre>
<p>Again, the result of the explanation can be presented with the generic function <code>plot()</code>.</p>
<div class="sourceCode" id="cb839"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb839-1"><a href="dalex.html#cb839-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb839-2"><a href="dalex.html#cb839-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fifa_pd) <span class="sc">+</span></span>
<span id="cb839-3"><a href="dalex.html#cb839-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Estimated value in Euro&quot;</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">suffix =</span> <span class="st">&quot;€&quot;</span>, <span class="at">prefix =</span> <span class="st">&quot;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb839-4"><a href="dalex.html#cb839-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Partial Dependence profiles for selected variables&quot;</span>)</span></code></pre></div>
<p><img src="08-interpretation-dalex_files/figure-html/08-interpretation-dalex-013-1.svg" width="768" style="display: block; margin: auto;" /></p>
<p>The general trend for most player characteristics is the same. The higher are the skills the higher is the player’s worth. With a single exception – variable Age.</p>
</div>
<div id="interpretability-instance-level" class="section level3" number="8.2.6">
<h3><span class="header-section-number">8.2.6</span> Instance level explanation</h3>
<p>Time to see how the model behaves for a single observation/player
This can be done for any player, but this example we will use the Cristiano Ronaldo.</p>
<p>The function <code>predict_parts</code> is an instance-level version of the <code>model_parts</code> function introduced in the previous section. For the background behind that method see the <a href="https://pbiecek.github.io/ema/breakDown.html">Introduction to Break Down</a>.</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="dalex.html#cb840-1" aria-hidden="true" tabindex="-1"></a>ronaldo <span class="ot">&lt;-</span> fifa[<span class="st">&quot;Cristiano Ronaldo&quot;</span>,]</span>
<span id="cb840-2"><a href="dalex.html#cb840-2" aria-hidden="true" tabindex="-1"></a>ronaldo_bd_ranger <span class="ot">&lt;-</span> <span class="fu">predict_parts</span>(ranger_exp,</span>
<span id="cb840-3"><a href="dalex.html#cb840-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">new_observation =</span> ronaldo)</span>
<span id="cb840-4"><a href="dalex.html#cb840-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ronaldo_bd_ranger)</span></code></pre></div>
<pre><code>##                                       contribution
## Ranger RF: intercept                       7475806
## Ranger RF: movement_reactions = 96        10704654
## Ranger RF: skill_ball_control = 92         6336235
## Ranger RF: mentality_positioning = 95      5173116
## Ranger RF: attacking_finishing = 94        5329618
## Ranger RF: skill_dribbling = 89            4647294</code></pre>
<p>The generic <code>plot()</code> function shows the estimated contribution of variables to the final prediction.</p>
<p>Cristiano is a striker, therefore characteristics that influence his worth are those related to attack, like <code>attacking_volleys</code> or <code>skill_dribbling</code>. The only variable with negative attribution is <code>age</code>.</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="dalex.html#cb842-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ronaldo_bd_ranger)</span></code></pre></div>
<p><img src="08-interpretation-dalex_files/figure-html/08-interpretation-dalex-016-1.svg" width="768" style="display: block; margin: auto;" /></p>
<p>Another way to inspect the local behaviour of the model is to use <a href="https://pbiecek.github.io/ema/shapley.html">SHapley Additive exPlanations (SHAP)</a>. It locally shows the contribution of variables to a single observation, just like Break Down.</p>
<div class="sourceCode" id="cb843"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb843-1"><a href="dalex.html#cb843-1" aria-hidden="true" tabindex="-1"></a>ronaldo_shap_ranger <span class="ot">&lt;-</span> <span class="fu">predict_parts</span>(ranger_exp,</span>
<span id="cb843-2"><a href="dalex.html#cb843-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">new_observation =</span> ronaldo,</span>
<span id="cb843-3"><a href="dalex.html#cb843-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">type =</span> <span class="st">&quot;shap&quot;</span>)</span>
<span id="cb843-4"><a href="dalex.html#cb843-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb843-5"><a href="dalex.html#cb843-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ronaldo_shap_ranger) <span class="sc">+</span></span>
<span id="cb843-6"><a href="dalex.html#cb843-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Estimated value in Euro&quot;</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">suffix =</span> <span class="st">&quot;€&quot;</span>, <span class="at">prefix =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<p><img src="08-interpretation-dalex_files/figure-html/08-interpretation-dalex-017-1.svg" width="768" style="display: block; margin: auto;" /></p>
<p>In the previous section, we’ve introduced a global explanation - Partial Dependence Plots. <a href="https://pbiecek.github.io/ema/ceterisParibus.html">Ceteris Paribus</a> is the instance level version of that plot. It shows the response of the model for observation when we change only one variable while others stay unchanged. Blue dot stands for the original value.</p>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="dalex.html#cb844-1" aria-hidden="true" tabindex="-1"></a>selected_variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;movement_reactions&quot;</span>,</span>
<span id="cb844-2"><a href="dalex.html#cb844-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;skill_ball_control&quot;</span>, <span class="st">&quot;skill_dribbling&quot;</span>)</span>
<span id="cb844-3"><a href="dalex.html#cb844-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb844-4"><a href="dalex.html#cb844-4" aria-hidden="true" tabindex="-1"></a>ronaldo_cp_ranger <span class="ot">&lt;-</span> <span class="fu">predict_profile</span>(ranger_exp, ronaldo, <span class="at">variables =</span> selected_variables)</span>
<span id="cb844-5"><a href="dalex.html#cb844-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb844-6"><a href="dalex.html#cb844-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ronaldo_cp_ranger, <span class="at">variables =</span> selected_variables) <span class="sc">+</span></span>
<span id="cb844-7"><a href="dalex.html#cb844-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Estimated value of Christiano Ronaldo&quot;</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">suffix =</span> <span class="st">&quot;€&quot;</span>, <span class="at">prefix =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<p><img src="08-interpretation-dalex_files/figure-html/08-interpretation-dalex-018-1.svg" width="768" style="display: block; margin: auto;" /></p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="iml.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mlr-org/mlr3book/edit/master/bookdown/08-interpretation-dalex.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/mlr-org/mlr3book/commits/master/bookdown/08-interpretation-dalex.Rmd",
"text": "Edit history"
},
"view": {
"link": null,
"text": null
},
"download": [["mlr3book.pdf", "PDF"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
